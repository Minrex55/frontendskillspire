<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo de Descargas - Sistema Educativo</title>
    <style>
        
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
     
body {
    background-color: #5A6E73;
}

.containertop {
    width: 100%;
    height: 10%;
    background-color: #273940; /* Color principal oscuro */
    display: flex;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
    backdrop-filter: blur(40px);
}

.containertoplogo {
    display: flex;
    align-items: center;
    padding-left: 20px;
}

.logoskill {
   width: 18%;
}

.nameskill {
    color: #F2F2DF; /* Color de fondo claro para contraste */
    font-family: "Poppins", sans-serif;
    font-size: 20px;
    margin-left: 10px;
}

.containertopcenter {
    width: 8%;
    height: 10vh;
}

.containertopnav {
    width: 70%;
    height: 10vh;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    background-color: transparent;
}

.navbutton {
    text-decoration: none;
    background-color: transparent;
    color: #F2F2DF; /* Color de fondo claro para contraste */
    font-size: 20px;
    border-style: none;
    width: auto;
    height: 100%;
    margin-left: 5px;
    padding: 12px;
    border-radius: 15px;
    transition: 0.5s;
}

.navbutton:hover {
    background-color: #A7F2EB; /* Color de acento */
    color: #273940; /* Color principal oscuro */
    cursor: pointer;
}

.profilesection {
    align-items: center;
    justify-content: center;
    width: 10%;
    height: 100%;
}

.profilesection img {
    width: 80%;
    height: 80%;
    padding: 3px;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

header {
    background-color: #273940; /* Color principal oscuro */
    color: #F2F2DF; /* Color de fondo claro para contraste */
    padding: 20px 0;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.tab-container {
    margin-top: 80px; /* Ajustado para evitar que el header fijo lo tape */
    background: #F2F2DF; /* Color de fondo claro */
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    overflow: hidden;
}

.tabs {
    display: flex;
    background: #5A6E73; /* Color secundario */
}

.tab {
    padding: 15px 25px;
    background: #273940; /* Color secundario */
    color: #F2F2DF; /* Color de fondo claro */
    border: none;
    cursor: pointer;
    flex: 1;
    text-align: center;
    font-weight: 600;
    transition: background 0.3s;
}

.tab:hover {
    background: #e74c3c; /* Color principal oscuro */
}

.tab.active {
    background: #273940; /* Color principal oscuro */
    color: #A7F2EB; /* Color de acento */
}

.tab-content {
    padding: 25px;
    display: none;
}

.tab-content.active {
    display: block;
}

.content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.content-item {
    background: white;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s, box-shadow 0.3s;
    border-left: 4px solid #A7F2EB; /* Color de acento */
}

.content-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.content-item h3 {
    margin-bottom: 10px;
    color: #273940; /* Color principal oscuro */
}

.content-item p {
    color: #5A6E73; /* Color secundario */
    margin-bottom: 15px;
    font-size: 14px;
}

.content-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    color: #5A6E73; /* Color secundario */
    margin-bottom: 15px;
}

.actions {
    display: flex;
    justify-content: space-between;
}

.btn {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s;
}

.btn-primary {
    background: #5A6E73; /* Color secundario */
    color: #F2F2DF; /* Color de fondo claro */
}

.btn-primary:hover {
    background: #273940; /* Color principal oscuro */
}

.btn-secondary {
    background: #F2F2DF; /* Color de fondo claro */
    color: #273940; /* Color principal oscuro */
    border: 1px solid #A7F2EB; /* Color de acento */
}

.btn-secondary:hover {
    background: #A7F2EB; /* Color de acento */
}

.filter-options {
    margin-bottom: 25px;
    padding: 15px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    border-bottom: 2px solid #A7F2EB; /* Color de acento */
}

.filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 15px;
}

.filter-group {
    flex: 1;
    min-width: 200px;
}

.filter-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #273940; /* Color principal oscuro */
}

select, input[type="search"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #A7F2EB; /* Color de acento */
    border-radius: 4px;
    font-size: 14px;
    background-color: #F2F2DF; /* Color de fondo claro */
}

select:focus, input[type="search"]:focus {
    outline: none;
    border-color: #5A6E73; /* Color secundario */
    box-shadow: 0 0 3px #A7F2EB; /* Color de acento */
}

.search-box {
    position: relative;
}

.search-box input {
    padding-right: 40px;
}

.search-icon {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: #5A6E73; /* Color secundario */
}

.download-history-item {
    display: flex;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid #A7F2EB; /* Color de acento */
    background: white;
}

.download-history-item:last-child {
    border-bottom: none;
}

.download-info {
    flex: 1;
}

.download-meta {
    display: flex;
    color: #5A6E73; /* Color secundario */
    font-size: 13px;
    margin-top: 5px;
}

.download-meta span {
    margin-right: 15px;
}

.download-actions {
    display: flex;
    gap: 10px;
}

.download-empty {
    text-align: center;
    padding: 40px 20px;
    color: #5A6E73; /* Color secundario */
}

.download-empty i {
    font-size: 48px;
    color: #A7F2EB; /* Color de acento */
    margin-bottom: 15px;
}

.badge {
    display: inline-block;
    font-size: 12px;
    padding: 4px 8px;
    border-radius: 50px;
    margin-right: 10px;
}

.badge-success {
    background: #A7F2EB; /* Color de acento */
    color: #273940; /* Color principal oscuro */
}

.badge-warning {
    background: #F2F2DF; /* Color de fondo claro */
    color: #5A6E73; /* Color secundario */
}

@media (max-width: 768px) {
    .content-grid {
        grid-template-columns: 1fr;
    }
    
    .filter-row {
        flex-direction: column;
        gap: 10px;
    }
    
    .download-history-item {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .download-actions {
        margin-top: 10px;
        width: 100%;
        justify-content: flex-end;
    }
}
    </style>
</head>
<body>

    <header>
        <div class="containertop">
            <div class="containertoplogo">
                <img src="../images/logo.png" alt="Logo SkillSpire" title="Logo SkillSpire" class="logoskill">
                <h1 class="nameskill">SkillSpire</h1>
            </div>
            <div class="containertopcenter">
                <!-- Espacio central -->
            </div>
            <div class="containertopnav">
                <a href="index.html" class="navlink"><button class="navbutton">Home</button></a>
                <a href="busquedacon.html" class="navlink"><button class="navbutton">Contenidos</button></a>
                <a href="faq.html" class="navlink"><button class="navbutton">FAQ</button></a>
                <a href="comunicacion.html" class="navlink"><button class="navbutton">Chats</button></a>
                <a href="calendario.html" class="navlink"><button class="navbutton">Calendario</button></a>
                <a href="caliusuarios.html" class="navlink"><button class="navbutton">Calificaciones</button></a>
                <a href="ia.html" class="navlink"><button class="navbutton">IA</button></a>
                <div class="profilesection">
                    <a href="config.html" class="profilelink"><img src="../images/profile.png" class="logoskill"></a>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" data-tab="available">Contenido Disponible</button>
                <button class="tab" data-tab="downloads">Mis Descargas</button>
            </div>
            
            <div id="available" class="tab-content active">
                <div class="filter-options">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="grade">Grado/Curso</label>
                            <select id="grade">
                                <option value="">Todos los grados</option>
                                <option value="1">1° Básico</option>
                                <option value="2">2° Básico</option>
                                <option value="3">3° Básico</option>
                                <option value="4">4° Básico</option>
                                <option value="5">5° Básico</option>
                                <option value="6">6° Básico</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="subject">Asignatura</label>
                            <select id="subject">
                                <option value="">Todas las asignaturas</option>
                                <option value="math">Matemáticas</option>
                                <option value="language">Lenguaje</option>
                                <option value="science">Ciencias</option>
                                <option value="history">Historia</option>
                                <option value="english">Inglés</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="type">Tipo de contenido</label>
                            <select id="type">
                                <option value="">Todos los tipos</option>
                                <option value="worksheet">Guías de trabajo</option>
                                <option value="presentation">Presentaciones</option>
                                <option value="test">Pruebas y evaluaciones</option>
                                <option value="syllabus">Planificaciones</option>
                                <option value="activity">Actividades</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="search">Buscar</label>
                            <div class="search-box">
                                <input type="search" id="search" placeholder="Buscar por título o palabra clave...">
                                <span class="search-icon">🔍</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="content-grid" id="content-list">
                    <!-- Contenido dinámico se cargará aquí -->
                </div>
            </div>
            
            <div id="downloads" class="tab-content">
                <div id="downloads-list">
                    <!-- Contenido dinámico se cargará aquí -->
                    <div class="download-empty">
                        <i>📁</i>
                        <h3>No tienes descargas</h3>
                        <p>Los contenidos que descargues aparecerán aquí</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos de ejemplo para simular contenido disponible
        const availableContent = [
            {
                id: 1,
                title: "Guía de Matemáticas: Fracciones",
                description: "Material de trabajo para estudiantes sobre operaciones con fracciones",
                grade: "5",
                subject: "math",
                type: "worksheet",
                date: "2025-03-20",
                size: "1.2 MB",
                format: "PDF"
            },
            {
                id: 2,
                title: "Evaluación de Lenguaje: Comprensión Lectora",
                description: "Prueba para evaluar comprensión de textos narrativos",
                grade: "4",
                subject: "language",
                type: "test",
                date: "2025-03-15",
                size: "842 KB",
                format: "DOCX"
            },
            {
                id: 3,
                title: "Presentación: Sistema Solar",
                description: "Presentación interactiva sobre el sistema solar y sus planetas",
                grade: "3",
                subject: "science",
                type: "presentation",
                date: "2025-03-10",
                size: "5.7 MB",
                format: "PPTX"
            },
            {
                id: 4,
                title: "Planificación Anual de Historia",
                description: "Planificación completa para el año escolar",
                grade: "6",
                subject: "history",
                type: "syllabus",
                date: "2025-02-28",
                size: "1.5 MB",
                format: "PDF"
            },
            {
                id: 5,
                title: "Actividad: Vocabulario en Inglés",
                description: "Juego para practicar vocabulario básico",
                grade: "2",
                subject: "english",
                type: "activity",
                date: "2025-03-05",
                size: "3.1 MB",
                format: "ZIP"
            },
            {
                id: 6,
                title: "Guía de Ciencias: Los Seres Vivos",
                description: "Material sobre clasificación de seres vivos",
                grade: "3",
                subject: "science",
                type: "worksheet",
                date: "2025-03-18",
                size: "2.3 MB",
                format: "PDF"
            }
        ];

        // Array para almacenar las descargas del usuario
        let userDownloads = [];

        // Función para cambiar entre pestañas
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Quitar clase active de todas las pestañas
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Añadir clase active a la pestaña actual
                this.classList.add('active');
                document.getElementById(this.dataset.tab).classList.add('active');
                
                // Si cambiamos a la pestaña de descargas, actualizar la lista
                if (this.dataset.tab === 'downloads') {
                    renderDownloads();
                }
            });
        });

        // Función para mostrar el contenido disponible
        function renderAvailableContent(content = availableContent) {
            const contentList = document.getElementById('content-list');
            contentList.innerHTML = '';
            
            if (content.length === 0) {
                contentList.innerHTML = `
                    <div class="download-empty" style="grid-column: 1 / -1;">
                        <i>🔍</i>
                        <h3>No se encontraron resultados</h3>
                        <p>Intenta con otros filtros de búsqueda</p>
                    </div>
                `;
                return;
            }
            
            content.forEach(item => {
                const isDownloaded = userDownloads.some(d => d.id === item.id);
                
                const card = document.createElement('div');
                card.className = 'content-item';
                card.innerHTML = `
                    <h3>${item.title}</h3>
                    <p>${item.description}</p>
                    <div class="content-info">
                        <span>Formato: ${item.format}</span>
                        <span>Tamaño: ${item.size}</span>
                    </div>
                    <div class="content-info">
                        <span>Grado: ${getGradeName(item.grade)}</span>
                        <span>Subido: ${formatDate(item.date)}</span>
                    </div>
                    <div class="actions">
                        <button class="btn btn-secondary" onclick="previewContent(${item.id})">Vista previa</button>
                        <button class="btn btn-primary ${isDownloaded ? 'downloaded' : ''}" 
                            onclick="${isDownloaded ? 'removeDownload' : 'downloadContent'}(${item.id})">
                            ${isDownloaded ? 'Descargado ✓' : 'Descargar'}
                        </button>
                    </div>
                `;
                contentList.appendChild(card);
            });
        }

        // Función para mostrar las descargas del usuario
        function renderDownloads() {
            const downloadsList = document.getElementById('downloads-list');
            
            if (userDownloads.length === 0) {
                downloadsList.innerHTML = `
                    <div class="download-empty">
                        <i>📁</i>
                        <h3>No tienes descargas</h3>
                        <p>Los contenidos que descargues aparecerán aquí</p>
                    </div>
                `;
                return;
            }
            
            downloadsList.innerHTML = '';
            userDownloads.forEach(item => {
                const downloadItem = document.createElement('div');
                downloadItem.className = 'download-history-item';
                downloadItem.innerHTML = `
                    <div class="download-info">
                        <h3>${item.title} 
                            <span class="badge badge-success">${item.format}</span>
                        </h3>
                        <div class="download-meta">
                            <span>Descargado: ${formatDate(item.downloadDate)}</span>
                            <span>Tamaño: ${item.size}</span>
                            <span>Asignatura: ${getSubjectName(item.subject)}</span>
                        </div>
                    </div>
                    <div class="download-actions">
                        <button class="btn btn-secondary" onclick="openContent(${item.id})">Abrir</button>
                        <button class="btn btn-secondary" onclick="removeDownload(${item.id})">Eliminar</button>
                    </div>
                `;
                downloadsList.appendChild(downloadItem);
            });
        }

        // Función para filtrar contenido
        function filterContent() {
            const gradeFilter = document.getElementById('grade').value;
            const subjectFilter = document.getElementById('subject').value;
            const typeFilter = document.getElementById('type').value;
            const searchFilter = document.getElementById('search').value.toLowerCase();
            
            const filteredContent = availableContent.filter(item => {
                return (gradeFilter === '' || item.grade === gradeFilter) &&
                       (subjectFilter === '' || item.subject === subjectFilter) &&
                       (typeFilter === '' || item.type === typeFilter) &&
                       (searchFilter === '' || 
                        item.title.toLowerCase().includes(searchFilter) || 
                        item.description.toLowerCase().includes(searchFilter));
            });
            
            renderAvailableContent(filteredContent);
        }

        // Función para descargar contenido
        function downloadContent(id) {
            const content = availableContent.find(item => item.id === id);
            if (!content) return;
            
            // Simular una descarga exitosa
            setTimeout(() => {
                // Añadir a descargas del usuario
                const download = {
                    ...content,
                    downloadDate: new Date().toISOString().split('T')[0]
                };
                
                userDownloads.push(download);
                
                // Actualizar botones en la lista de contenido
                const buttons = document.querySelectorAll(`.content-item button.btn-primary`);
                buttons.forEach(button => {
                    if (button.onclick.toString().includes(`downloadContent(${id})`)) {
                        button.textContent = 'Descargado ✓';
                        button.classList.add('downloaded');
                        button.onclick = function() { removeDownload(id); };
                    }
                });
                
                alert(`¡"${content.title}" descargado con éxito!`);
            }, 500);
        }

        // Función para eliminar una descarga
        function removeDownload(id) {
            const index = userDownloads.findIndex(item => item.id === id);
            if (index !== -1) {
                const title = userDownloads[index].title;
                userDownloads.splice(index, 1);
                
                // Si estamos en la pestaña de descargas, actualizar la lista
                if (document.querySelector('.tab[data-tab="downloads"]').classList.contains('active')) {
                    renderDownloads();
                } else {
                    // Actualizar botones en la lista de contenido
                    const buttons = document.querySelectorAll(`.content-item button.btn-primary`);
                    buttons.forEach(button => {
                        if (button.classList.contains('downloaded') && 
                            button.onclick.toString().includes(`removeDownload(${id})`)) {
                            button.textContent = 'Descargar';
                            button.classList.remove('downloaded');
                            button.onclick = function() { downloadContent(id); };
                        }
                    });
                }
                
                alert(`"${title}" eliminado de tus descargas.`);
            }
        }

        // Función para simular vista previa
        function previewContent(id) {
            const content = availableContent.find(item => item.id === id);
            if (content) {
                alert(`Vista previa de "${content.title}" - Esta funcionalidad mostraría una vista previa del documento.`);
            }
        }

        // Función para simular apertura de contenido
        function openContent(id) {
            const content = userDownloads.find(item => item.id === id);
            if (content) {
                alert(`Abriendo "${content.title}" - Esta funcionalidad abriría el documento descargado.`);
            }
        }

        // Funciones auxiliares
        function getGradeName(grade) {
            const grades = {
                "1": "1° Básico",
                "2": "2° Básico",
                "3": "3° Básico",
                "4": "4° Básico",
                "5": "5° Básico",
                "6": "6° Básico"
            };
            return grades[grade] || grade;
        }

        function getSubjectName(subject) {
            const subjects = {
                "math": "Matemáticas",
                "language": "Lenguaje",
                "science": "Ciencias",
                "history": "Historia",
                "english": "Inglés"
            };
            return subjects[subject] || subject;
        }

        function formatDate(dateString) {
            const date = new Date(dateString); 
            return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
        }

        // Inicializar el módulo
        document.addEventListener('DOMContentLoaded', function() {
            renderAvailableContent();
            
            // Configurar filtros
            document.getElementById('grade').addEventListener('change', filterContent);
            document.getElementById('subject').addEventListener('change', filterContent);
            document.getElementById('type').addEventListener('change', filterContent);
            document.getElementById('search').addEventListener('input', filterContent);
        });
    </script>
</body>
</html>